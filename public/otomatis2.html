<html>

<head>
    <title>Hasil Prediksi Lampu</title>
</head>

<body>
    <h1>Hasil Prediksi Lampu</h1>
    <p id="lamp-status">Status Lampu: </p>
    <button id="predict-button">Prediksi</button>

    <script>
        document.getElementById("predict-button").addEventListener("click", function() {
            // Mendapatkan waktu yang akan digunakan untuk prediksi (misalnya, waktu sekarang)
            var currentTime = new Date().toLocaleTimeString([], {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });

            // Mengirim permintaan POST ke Flask
            fetch('/predict_lights', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                            time: currentTime,
                            k_neighbors: 3
                        }) // Mengirim waktu dan jumlah tetangga terdekat
                })
                .then(response => response.json())
                .then(data => {
                    // Menampilkan hasil prediksi di dalam elemen dengan id "lamp-status"
                    var lampStatus = data.predicted_lights.join(', '); // Menggabungkan status lampu menjadi string
                    document.getElementById("lamp-status").textContent = "Status Lampu: " + lampStatus;
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Terjadi kesalahan saat memproses permintaan.');
                });
        });
    </script>
</body>

</html>